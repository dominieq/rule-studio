

<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> App/App.js</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">
  <link type="text/css" rel="stylesheet" href="">
  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
            
        </div>
        <div class="menu">
            
            <div class="navigation">
                <a
                    href="index.html"
                    class="link"
                >
                    API Documentation
                </a>
                
                
                
            </div>
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Classes</h3><ul><li><a href="App.html">App</a></li></ul><h3>Global</h3><ul><li><a href="global.html#nonNullProperty">nonNullProperty</a></li></ul></div><div class="category"><h2>Buttons</h2><h3>Classes</h3><ul><li><a href="AcceptButton.html">AcceptButton</a></li><li><a href="CalculateButton.html">CalculateButton</a></li><li><a href="CancelButton.html">CancelButton</a></li><li><a href="MatrixButton.html">MatrixButton</a></li><li><a href="MatrixDownloadButton.html">MatrixDownloadButton</a></li><li><a href="MatrixSwapButton.html">MatrixSwapButton</a></li><li><a href="MoreSettingsIconButton.html">MoreSettingsIconButton</a></li><li><a href="SettingsButton.html">SettingsButton</a></li><li><a href="SortButton.html">SortButton</a></li></ul></div><div class="category"><h2>Dialogs</h2><h3>Classes / Details Dialogs</h3><ul><li><a href="ClassifiedObjectDialog.html">ClassifiedObjectDialog</a></li><li><a href="ConesDialog.html">ConesDialog</a></li><li><a href="RulesDialog.html">RulesDialog</a></li><li><a href="UnionsDialog.html">UnionsDialog</a></li></ul><h3>Classes</h3><ul><li><a href="CSVDialog.html">CSVDialog</a></li><li><a href="DeleteProjectDialog.html">DeleteProjectDialog</a></li><li><a href="MatrixDialog.html">MatrixDialog</a></li><li><a href="RenameProjectDialog.html">RenameProjectDialog</a></li><li><a href="SettingsProjectDialog.html">SettingsProjectDialog</a></li></ul></div><div class="category"><h2>Header</h2><h3>Classes / Elements</h3><ul><li><a href="FilesDetails.html">FilesDetails</a></li><li><a href="ProjectMenu.html">ProjectMenu</a></li></ul><h3>Classes</h3><ul><li><a href="Header.html">Header</a></li></ul></div><div class="category"><h2>Help</h2><h3>Classes / Elements</h3><ul><li><a href="Chapter.html">Chapter</a></li><li><a href="Image.html">Image</a></li></ul><h3>Classes</h3><ul><li><a href="Help.html">Help</a></li></ul><h3>Classes / Utilities</h3><ul><li><a href="Styled%2520Drawer.html">Styled Drawer</a></li><li><a href="Styled%2520ListItem.html">Styled ListItem</a></li><li><a href="Styled%2520Scrollable.html">Styled Scrollable</a></li></ul></div><div class="category"><h2>Home</h2><h3>Classes / Elements</h3><ul><li><a href="Footer.html">Footer</a></li><li><a href="NavigateButton.html">NavigateButton</a></li></ul><h3>Classes</h3><ul><li><a href="Home.html">Home</a></li></ul></div><div class="category"><h2>Import</h2><h3>Classes / Elements</h3><ul><li><a href="File%2520Select%2520Zone.html">File Select Zone</a></li></ul><h3>Classes</h3><ul><li><a href="Import.html">Import</a></li></ul></div><div class="category"><h2>Project</h2><h3>Classes / Tabs</h3><ul><li><a href="Classification.html">Classification</a></li><li><a href="Cones.html">Cones</a></li><li><a href="CrossValidation.html">CrossValidation</a></li><li><a href="Data.html">Data</a></li><li><a href="Rules.html">Rules</a></li><li><a href="Unions.html">Unions</a></li></ul><h3>Classes / Calculations</h3><ul><li><a href="DefaultClassificationResult.html">DefaultClassificationResult</a></li><li><a href="NumberOfFolds.html">NumberOfFolds</a></li><li><a href="Seed.html">Seed</a></li><li><a href="Threshold.html">Threshold</a></li><li><a href="TypeOfClassifier.html">TypeOfClassifier</a></li><li><a href="TypeOfRules.html">TypeOfRules</a></li><li><a href="TypeOfUnions.html">TypeOfUnions</a></li></ul><h3>Classes / Filtering</h3><ul><li><a href="FilterNoResults.html">FilterNoResults</a></li><li><a href="FilterTextField.html">FilterTextField</a></li><li><a href="NumericFilter.html">NumericFilter</a></li></ul><h3>Classes</h3><ul><li><a href="ProjectTabs.html">ProjectTabs</a></li></ul><h3>Global</h3><ul><li><a href="global.html#filterFunction">filterFunction</a></li></ul></div><div class="category"><h2>Utils</h2><h3>Classes / Feedback</h3><ul><li><a href="Alert%2520Badge.html">Alert Badge</a></li><li><a href="Circle%2520Helper.html">Circle Helper</a></li><li><a href="CustomizedSnackbars.html">CustomizedSnackbars</a></li><li><a href="CustomLoadingIcon.html">CustomLoadingIcon</a></li><li><a href="DotBadge.html">DotBadge</a></li><li><a href="External%2520File.html">External File</a></li><li><a href="Loading%2520Delay.html">Loading Delay</a></li><li><a href="Loading%2520Snackbar.html">Loading Snackbar</a></li><li><a href="Outdated%2520Data.html">Outdated Data</a></li><li><a href="Styled%2520Alert.html">Styled Alert</a></li><li><a href="Styled%2520Circular%2520Progress.html">Styled Circular Progress</a></li></ul><h3>Classes / Classes</h3><ul><li><a href="AlertError.html">AlertError</a></li><li><a href="InvalidPathParamsException.html">InvalidPathParamsException</a></li><li><a href="Project.html">Project</a></li></ul><h3>Classes / Inputs</h3><ul><li><a href="Attribute%2520Domain.html">Attribute Domain</a></li><li><a href="ColumnHeaderMenu.html">ColumnHeaderMenu</a></li><li><a href="Custom%2520Button%2520Group.html">Custom Button Group</a></li><li><a href="Custom%2520Switch.html">Custom Switch</a></li><li><a href="Custom%2520Text%2520Field.html">Custom Text Field</a></li><li><a href="Custom%2520Upload.html">Custom Upload</a></li><li><a href="CustomControlLabel.html">CustomControlLabel</a></li><li><a href="CustomFormLabel.html">CustomFormLabel</a></li><li><a href="Data%2520Filter%2520Button.html">Data Filter Button</a></li><li><a href="DropDownForAttributes.html">DropDownForAttributes</a></li><li><a href="IconLabelButtons.html">IconLabelButtons</a></li><li><a href="Styled%2520Button.html">Styled Button</a></li><li><a href="Styled%2520Checkbox.html">Styled Checkbox</a></li><li><a href="Styled%2520Radio%2520Button.html">Styled Radio Button</a></li><li><a href="Styled%2520Slider.html">Styled Slider</a></li><li><a href="Styled%2520Switch.html">Styled Switch</a></li><li><a href="StyledIconButton.html">StyledIconButton</a></li></ul><h3>Classes / Menus</h3><ul><li><a href="AttributesMenu.html">AttributesMenu</a></li><li><a href="SortMenu.html">SortMenu</a></li></ul><h3>Classes / Data Display</h3><ul><li><a href="AttributesVirtualizedTable.html">AttributesVirtualizedTable</a></li><li><a href="Collapsible%2520Divider.html">Collapsible Divider</a></li><li><a href="Coloured%2520Title.html">Coloured Title</a></li><li><a href="Custom%2520Tooltip.html">Custom Tooltip</a></li><li><a href="ObjectsComparisonTable.html">ObjectsComparisonTable</a></li><li><a href="ObjectTable.html">ObjectTable</a></li><li><a href="RuleTable.html">RuleTable</a></li><li><a href="Styled%2520Divider.html">Styled Divider</a></li><li><a href="Styled%2520File%2520Chip.html">Styled File Chip</a></li><li><a href="TableItemsList.html">TableItemsList</a></li><li><a href="TablesList.html">TablesList</a></li><li><a href="Text%2520with%2520Hover%2520Tooltip.html">Text with Hover Tooltip</a></li><li><a href="TraitsTable.html">TraitsTable</a></li><li><a href="Virtualized%2520Matrix.html">Virtualized Matrix</a></li><li><a href="Virtualized%2520Table.html">Virtualized Table</a></li></ul><h3>Classes / Containers</h3><ul><li><a href="CenteredColumn.html">CenteredColumn</a></li><li><a href="Custom%2520Box.html">Custom Box</a></li><li><a href="Custom%2520Drawer.html">Custom Drawer</a></li><li><a href="MultiColumns.html">MultiColumns</a></li><li><a href="TabBody.html">TabBody</a></li></ul><h3>Classes / Surfaces</h3><ul><li><a href="Custom%2520Header.html">Custom Header</a></li><li><a href="Custom%2520Popper.html">Custom Popper</a></li><li><a href="Custom%2520Section.html">Custom Section</a></li><li><a href="Styled%2520Paper.html">Styled Paper</a></li></ul><h3>Classes / Dialogs</h3><ul><li><a href="DeleteProjectDialog-ProjectName.html">ProjectName</a></li><li><a href="FullscreenDialog.html">FullscreenDialog</a></li><li><a href="FullscreenHeader.html">FullscreenHeader</a></li><li><a href="StyledDialogContent.html">StyledDialogContent</a></li></ul><h3>Classes / Result List</h3><ul><li><a href="Result%2520List.html">Result List</a></li><li><a href="Result%2520List%2520Item.html">Result List Item</a></li><li><a href="Result%2520List%2520Subheader.html">Result List Subheader</a></li></ul><h3>Classes / Navigation</h3><ul><li><a href="Slides.html">Slides</a></li><li><a href="Styled%2520Pagination.html">Styled Pagination</a></li><li><a href="Styled%2520Tabs.html">Styled Tabs</a></li><li><a href="StyledLinkTab.html">StyledLinkTab</a></li><li><a href="StyledTab.html">StyledTab</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addSubheaders">addSubheaders</a></li><li><a href="global.html#conjugateContent">conjugateContent</a></li><li><a href="global.html#downloadFunction">downloadFunction</a></li><li><a href="global.html#downloadMatrix">downloadMatrix</a></li><li><a href="global.html#downloadRules">downloadRules</a></li><li><a href="global.html#estimateMatrixHeight">estimateMatrixHeight</a></li><li><a href="global.html#estimateMatrixWidth">estimateMatrixWidth</a></li><li><a href="global.html#estimateTableHeight">estimateTableHeight</a></li><li><a href="global.html#exportProject">exportProject</a></li><li><a href="global.html#fetchClassification">fetchClassification</a></li><li><a href="global.html#fetchConeObjects">fetchConeObjects</a></li><li><a href="global.html#fetchCones">fetchCones</a></li><li><a href="global.html#fetchCrossValidation">fetchCrossValidation</a></li><li><a href="global.html#fetchData">fetchData</a></li><li><a href="global.html#fetchDescriptiveAttributes">fetchDescriptiveAttributes</a></li><li><a href="global.html#fetchFold">fetchFold</a></li><li><a href="global.html#fetchMatrix">fetchMatrix</a></li><li><a href="global.html#fetchObject">fetchObject</a></li><li><a href="global.html#fetchObjectNames">fetchObjectNames</a></li><li><a href="global.html#fetchProject">fetchProject</a></li><li><a href="global.html#fetchProjectDetails">fetchProjectDetails</a></li><li><a href="global.html#fetchProjects">fetchProjects</a></li><li><a href="global.html#fetchRule">fetchRule</a></li><li><a href="global.html#fetchRules">fetchRules</a></li><li><a href="global.html#fetchUnion">fetchUnion</a></li><li><a href="global.html#fetchUnions">fetchUnions</a></li><li><a href="global.html#getAppropriateColor">getAppropriateColor</a></li><li><a href="global.html#getAppropriateSign">getAppropriateSign</a></li><li><a href="global.html#getFixed">getFixed</a></li><li><a href="global.html#getItemName">getItemName</a></li><li><a href="global.html#getRelationSign">getRelationSign</a></li><li><a href="global.html#getRuleName">getRuleName</a></li><li><a href="global.html#getTitleConditions">getTitleConditions</a></li><li><a href="global.html#getTitleDecisions">getTitleDecisions</a></li><li><a href="global.html#handleNotOk">handleNotOk</a></li><li><a href="global.html#hexToRgb">hexToRgb</a></li><li><a href="global.html#importProject">importProject</a></li><li><a href="global.html#mergerClasses">mergerClasses</a></li><li><a href="global.html#parseClassificationParams">parseClassificationParams</a></li><li><a href="global.html#parseClassifiedItems">parseClassifiedItems</a></li><li><a href="global.html#parseClassifiedListItems">parseClassifiedListItems</a></li><li><a href="global.html#parseConditions">parseConditions</a></li><li><a href="global.html#parseConesItems">parseConesItems</a></li><li><a href="global.html#parseConesListItems">parseConesListItems</a></li><li><a href="global.html#parseCrossValidationParams">parseCrossValidationParams</a></li><li><a href="global.html#parseDecisions">parseDecisions</a></li><li><a href="global.html#parseFormData">parseFormData</a></li><li><a href="global.html#parseMatrix">parseMatrix</a></li><li><a href="global.html#parseRulesItems">parseRulesItems</a></li><li><a href="global.html#parseRulesListItems">parseRulesListItems</a></li><li><a href="global.html#parseRulesParams">parseRulesParams</a></li><li><a href="global.html#parseUnionsItems">parseUnionsItems</a></li><li><a href="global.html#parseUnionsListItems">parseUnionsListItems</a></li><li><a href="global.html#responseBlob">responseBlob</a></li><li><a href="global.html#responseJson">responseJson</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Source</p>
                    <h1>App/App.js</h1>
                </header>
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, {Component} from 'react';
import { exportProject, fetchProject, fetchProjects, importProject } from "../Utils/utilFunctions/fetchFunctions";
import Header from "../Header/Header";
import { ProjectMenu } from "../Header/Elements";
import Help from '../Body/Help/Help';
import Home from "../Body/Home/Home";
import Import from "../Body/Import/Import";
import ProjectTabs from "../Body/Project/ProjectTabs";
import Project from "../Utils/Classes/Project";
import LoadingDelay from "../Utils/Feedback/LoadingDelay";
import LoadingSnackbar from "../Utils/Feedback/LoadingSnackbar";
import StyledAlert from "../Utils/Feedback/StyledAlert";
import DeleteProjectDialog from "../Utils/Dialogs/DeleteProjectDialog";
import ImportProjectDialog from "../Utils/Dialogs/ImportProjectDialog";
import RenameProjectDialog from "../Utils/Dialogs/RenameProjectDialog";
import SettingsProjectDialog from "../Utils/Dialogs/SettingsProjectDialog";
import { DarkTheme, LightTheme } from "../Utils/Themes/Themes";
import CssBaseline from "@material-ui/core/CssBaseline";
import {MuiThemeProvider} from "@material-ui/core/styles";
import { Switch, Route } from 'react-router-dom';
import { tabNames } from "../Utils/Constants/TabsNamesInPath";

/**
 * The main component that contains all other elements.
 * Provides two themes: dark and light.
 *
 * @class
 */
class App extends Component {
    constructor(props) {
        super(props);

        this.state = {
            loading: false,
            loadingTitle: "",
            deleting: false,
            body: "Home",
            currentProject: -1,
            projects: [],
            objectGlobalName: null,
            darkTheme: true,
            serverBase: "http://localhost:8080",
            open: {
                deleteDialog: false,
                importDialog: false,
                renameDialog: false,
                settingsDialog: false
            },
            alertProps: undefined
        };

        this.appBarRef = React.createRef();
        this.existsPath = "";
    }

    /**
     * A component's lifecycle method. Fired once when component was mounted.
     * &lt;br>
     * &lt;br>
     * Makes an API call on projects to receive the latest list of all projects.
     * Then, updates states and makes necessary changes in display.
     *
     * @function
     * @memberOf App
     */
    componentDidMount() {
        const base = window.location.origin.toString();

        this.setState({
            loading: true,
            loadingTitle: "Loading projects",
        }, () => {
            fetchProjects(
                "GET", null, base
            ).then(result => {
                if (Array.isArray(result)) {
                    this.setState({
                        projects: result.map(item => new Project(item.id, item.name))
                    }, () => {this.checkIfProjectInURLExists()});
                } else {
                    this.setState({
                        alertProps: {
                            message: "Server isn't responding :(",
                            open: true,
                            severity: "error"
                        }
                    });
                }
            }).catch(
                this.onSnackbarOpen
            ).finally(() => {
                this.setState({
                    loading: false,
                    serverBase: base
                });
            });
        });
        
        this.props.history.listen((location, action) => {
            if (action === "POP") {
                if (location.state &amp;&amp; location.state.bodyName) {
                    if (location.state.bodyName === "Project") {
                        if (location.state.projectIndex >= 0 &amp;&amp; location.state.projectIndex &lt; this.state.projects.length) {
                            this.existsPath = `${this.state.projects[location.state.projectIndex].id}`;

                            this.setState({
                                body: location.state.bodyName,
                                currentProject: location.state.projectIndex
                            });
                        } else {
                            this.setState({
                                body: "Import",
                                currentProject: -1
                            });

                            this.props.history.replace({
                                pathname: "/newProject",
                                state: { bodyName: "Import" }
                            });
                        }
                    } else {
                        this.setState({
                            body: location.state.bodyName,
                            currentProject: -1
                        });
                    }
                } else if (location.state) {
                    let i;

                    for (i = 0; i &lt; this.state.projects.length; i++) {
                        if (this.state.projects[i].id === location.state.projectId) {
                            break;
                        }
                    }

                    if (i &lt; this.state.projects.length) {
                        this.existsPath = `${location.state.projectId}`;

                        this.setState({
                            body: "Project",
                            currentProject: i
                        });
                    } else {
                        this.setState({
                            body: "Import",
                            currentProject: -1
                        });

                        this.props.history.replace({
                            pathname: "/newProject",
                            state: { bodyName: "Import" }
                        });
                    }
                }
            }
          });
    };

    /**
     * Method is forwarded to the {@link ProjectTabs} and further to all tabs except {@link Data}.
     * Saves changes from provided project in the {@link App}'s state and updates index options.
     *
     * @function
     * @memberOf App
     * @param {Object} project - Project with unsaved changes.
     */
    updateProject = (project) => {
        this.setState(({projects}) => {
            if (projects.length > 0) {
                let index = -1;

                for (let i = 0; i &lt; projects.length; i++) {
                    if (projects[i].id === project.id) {
                        index = i;
                        break;
                    }
                }

                if (index === -1) {
                    return { projects: projects };
                }

                return {
                    projects: [
                        ...projects.slice(0, index),
                        {
                            ...projects[index],
                            ...project
                        },
                        ...projects.slice(index + 1)
                    ]
                };
            } else {
                return { projects: projects };
            }
        });
    };

    onBodyChange = (name) => {
        this.setState(({currentProject}) => ({
            body: name,
            currentProject: name !== "Project" ? -1 : currentProject
        }));
        
        switch (name) {
            case "Help":
                this.props.history.push({
                    pathname: "/help",
                    state: { bodyName: name }
                });
                break;
            case "Import":
                this.props.history.push({
                    pathname: "/newProject",
                    state: { bodyName: name }
                });
                break;
            default: 
                this.props.history.push({
                    pathname: "/home",
                    state: { bodyName: "Home" }
                });
                break;
        }
    };

    onCurrentProjectChange = (index, tabName) => {
        const { projects } = this.state;

        if (tabName !== "" &amp;&amp; tabNames.includes(tabName)) {
            this.props.history.push({
                pathname: `/${projects[index].id}/${tabName}`,
                state: { bodyName: "Project", projectIndex: index }
            });
        } else { 
            this.props.history.push({
                pathname: `/${projects[index].id}/${tabNames[0]}`,
                state: { bodyName: "Project", projectIndex: index }
            });
        }

        this.existsPath = `${projects[index].id}`;
      
        this.setState({
            body: "Project",
            currentProject: index
        });
    };

    onColorsChange = () => {
        this.setState(prevState => ({
            darkTheme: !prevState.darkTheme
        }))
    };

    onToggleDialog = (dialogName) => {
        this.setState(({open}) => ({
            open: {...open, [dialogName]: !open[dialogName]}
        }));
    };

    onSnackbarOpen = (exception) => {
        if (!(exception.hasOwnProperty("type") &amp;&amp; exception.type === "AlertError")) {
            console.error(exception);
            return;
        }

        this.setState({
            alertProps: exception
        });
    };

    onSnackbarClose = (event, reason) => {
        if (reason !== "clickaway") {
            this.setState(({alertProps}) => ({
                alertProps: {...alertProps, open: false}
            }));
        }
    };

    /**
     * Method forwarded to the {@link Import} section.
     * Fired when user accepts their selection and requests to create project.
     * &lt;br>
     * &lt;br>
     * Method checks if project name is already used.
     * Then, makes an API call on projects to create new project.
     * Eventually, adds new project to {@link App}'s state and changes section to "Project".
     *
     * @function
     * @memberOf App
     * @param {string} name - The name of the new project.
     * @param {Object[]} files - The list of files that are used to build new project.
     * @param {Object} [csvSpecs] - If a file containing data was in CSV format, this object contains CSV settings.
     */
    onFilesAccepted = (name, files, csvSpecs) => {
        if (!this.isNameUnique(name)) {
            this.setState({
                alertProps: {
                    message: "Project name already exists :(",
                    open: true,
                    severity: "warning"
                }
            });
        } else {
            const { serverBase } = this.state;

            this.setState({
                loading: true,
                loadingTitle: "Creating project"
            }, () => {
                const method = "POST";
                const data = new FormData();

                data.append("name", name);
                files.map(file => data.append(file.type, file.file));

                if (csvSpecs != null &amp;&amp; Object.keys(csvSpecs).length) {
                    Object.keys(csvSpecs).map(key => data.append(key, csvSpecs[key]));
                }

                fetchProjects(
                    method, data, serverBase
                ).then(result => {
                    if (result != null &amp;&amp; result.hasOwnProperty("id")
                        &amp;&amp; result.hasOwnProperty("name")) {

                        this.props.history.push({
                            pathname: `/${result.id}`,
                            state: { bodyName: "Project", projectIndex: this.state.projects.length }
                        });
                        this.existsPath = `${result.id}`;
                      
                        this.setState(({projects}) => ({
                            body: "Project",
                            currentProject: projects.length,
                            projects: [...projects, new Project(result.id, result.name)],
                            alertProps: {
                                message: `${result.name} has been created!`,
                                open: true,
                                severity: "success"
                            }
                        }));
                    }
                }).catch(
                    this.onSnackbarOpen
                ).finally(() => {
                    this.setState({ loading: false });
                });
            });
        }
    };

    onSaveProject = () => {
        const { serverBase, currentProject, projects } = this.state;
        const pathParams = { projectId: projects[currentProject].id };

        if (currentProject >= 0) {
            this.setState({
                loading: true,
                loadingTitle: "Compressing project"
            }, () => {
                exportProject(pathParams, serverBase)
                    .catch(this.onSnackbarOpen)
                    .finally(() => {
                        this.setState({ loading: false });
                    });
            });
        }
    };

    onUploadProject = (file) => {
        if (file != null) {
            const { serverBase } = this.state;

            this.setState({
                loading: true,
                loadingTitle: "Importing project"
            }, () => {
                const body = new FormData();
                body.append("importFile", file);

                importProject(
                    body, serverBase
                ).then(result => {
                    if (result != null &amp;&amp; result.hasOwnProperty("id")
                        &amp;&amp; result.hasOwnProperty("name")) {
                      
                        this.props.history.push({
                            pathname: `/${result.id}`,
                            state: { bodyName: "Project", projectIndex: this.state.projects.length }
                        });
                        this.existsPath = `${result.id}`;

                        this.setState(({projects}) => ({
                            body: "Project",
                            currentProject: projects.length,
                            projects: [...projects, new Project(result.id, result.name)],
                            alertProps: {
                                message: `${result.name} has been imported!`,
                                open: true,
                                severity: "success"
                            }
                        }));
                    }
                }).catch(
                    this.onSnackbarOpen
                ).finally(() => {
                    this.setState({ loading: false, loadingTitle: "" });
                });
            });
        }

        this.setState(({open}) => ({
            open: { ...open, importDialog: false }
        }));
    }
    
    /**
     * Callback fired when {@link SettingsProjectDialog} changed global visible object name.
     *
     * @function
     * @memberOf App
     */
    onObjectNamesChange = (objectVisibleName) => {
        this.setState({
            objectGlobalName: objectVisibleName
        });
    };

    /**
     * Callback fired when {@link DeleteProjectDialog} requests to be closed.
     * If user confirmed the deletion, method proceeds to delete current project.
     * Then updates {@link App}'s state and closes dialog.
     *
     * @function
     * @memberOf App
     * @param {boolean} action - If &lt;code>true&lt;/code> the method will proceed to delete current project.
     */
    onDeleteDialogClose = (action) => {
        const { currentProject, projects, serverBase } = this.state;

        if (action &amp;&amp; currentProject !== -1) {
            this.setState({
                loading: true,
                loadingTitle: "Deleting project",
                deleting: true
            }, () => {
                const pathParams = { projectId: projects[currentProject].id };
                const method = "DELETE";

                fetchProject(
                    pathParams, method, null, serverBase
                ).then(() => {
                    this.props.history.replace({
                        pathname: `/newProject`,
                        state: { bodyName: "Import" }
                    });
                    const removedProject = projects[currentProject].name;

                    this.setState(({projects, currentProject}) => ({
                        body: "Import",
                        currentProject: -1,
                        projects: [
                            ...projects.slice(0, currentProject),
                            ...projects.slice(currentProject + 1)
                        ],
                        alertProps: {
                            message: `${removedProject} has been successfully deleted!`,
                            open: true,
                            severity: "success"
                        }
                    }));
                }).catch(
                    this.onSnackbarOpen
                ).finally(() => {
                    this.setState({ loading: false, deleting: false });
                });
            });
        }

        this.setState(({open}) => ({
            open: {...open, deleteDialog: false}
        }));
    };

    /**
     * Callback fired when {@link RenameProjectDialog} requests to be closed.
     * If user provided new name and when the new name is unique, method proceeds to update project's name.
     * Then updates {@link App}'s state and closes dialog.
     *
     * @function
     * @memberOf App
     * @param {string} name - The new name for current project.
     */
    onRenameDialogClose = (name) => {
        if (name) {
            if (this.isNameUnique(name)) {
                const { currentProject, projects, serverBase } = this.state;

                this.setState({
                    loading: true,
                    loadingTitle: "Modifying project name"
                }, () => {
                    const pathParams = { projectId: projects[currentProject].id };
                    const method = "PATCH"
                    const body = new FormData();
                    body.append("name", name);

                    fetchProject(
                        pathParams, method, body, serverBase
                    ).then(result => {
                        if (result) {
                            this.setState(({currentProject, projects}) => ({
                                projects: [
                                    ...projects.slice(0, currentProject),
                                    { ...projects[currentProject], name: result.name },
                                    ...projects.slice(currentProject + 1)
                                ],
                                alertProps: {
                                    message: "Project name changed successfully!",
                                    open: true,
                                    severity: "success"
                                },
                            }));
                        }
                    }).catch(
                        this.onSnackbarOpen
                    ).finally(() => {
                        this.setState({ loading: false });
                    });
                });
            } else {
                this.setState({
                    alertProps: {
                        message: "Project name already exists!",
                        open: true,
                        severity: 'warning'
                    }
                });
                return;
            }
        }

        this.setState(({open}) => ({
            open: {...open, renameDialog: false}
        }));
    };

    /**
     * Checks whether a provided name is unique among other project's names.
     *
     * @function
     * @memberOf App
     * @param {string} name - Project's name.
     * @returns {boolean} - If &lt;code>true&lt;/code> the provided name is unique.
     */
    isNameUnique = (name) => {
        const { currentProject, open: { renameDialog }, projects } = this.state;

        for (let i = 0; i &lt; projects.length; i++) {
            if (projects[i].name === name) {
                return renameDialog &amp;&amp; currentProject === i;
            }
        }
        return true;
    };

    checkIfProjectInURLExists = () => {
        const { projects } = this.state;
        const url = window.location.href.toString();
        const urlSplitted = url.split('/');
        let projectFound = false; 

        if (urlSplitted.length >= 4) {
            const projectId = url.split('/')[3];

            for (let i = 0; i &lt; projects.length; i++) {
                if (projects[i].id === projectId) {
                    projectFound = true;
                    this.existsPath = `${projects[i].id}`;

                    if (urlSplitted.length >= 5) {
                        const tabName = url.split('/')[4];
                        const { projects } = this.state;

                        if (tabName !== "" &amp;&amp; tabNames.includes(tabName)) {
                            this.props.history.replace({
                                pathname: `/${projects[i].id}/${tabName}`,
                                state: { bodyName: "Project", projectIndex: i }
                            });
                        } else { 
                            this.props.history.replace({
                                pathname: `/${projects[i].id}/${tabNames[0]}`,
                                state: { bodyName: "Project", projectIndex: i }
                            });
                        }
                    }
                    else {
                        this.props.history.replace({
                            pathname: `/${projects[i].id}/${tabNames[0]}`,
                            state: { bodyName: "Project", projectIndex: i }
                        });
                    }

                    this.setState({
                        body: "Project",
                        currentProject: i
                    });
                }
            }
            
            if (!projectFound) {
                switch (projectId) {
                    case "help":
                        this.props.history.replace({
                            pathname: "/help",
                            state: {bodyName: "Help"}
                        });

                        this.setState({
                            body: "Help",
                            currentProject: -1
                        })
                        break;
                    case "newProject":
                        this.props.history.replace({
                            pathname: "/newProject",
                            state: { bodyName: "Import" }
                        });

                        this.setState({
                            body: "Import",
                            currentProject: -1
                        })
                        break;
                    default: 
                        this.props.history.replace({
                            pathname: "/home",
                            state: { bodyName: "Home" }
                        });

                        this.setState({
                            body: "Home",
                            currentProject: -1
                        })
                        break;
                }
            }
        }
    };

    render() {
        const { deleting, currentProject, projects, objectGlobalName, open, serverBase, alertProps } = this.state;
        const { deleteDialog, importDialog, renameDialog, settingsDialog } = open;

        return (
            &lt;MuiThemeProvider theme={this.state.darkTheme ? DarkTheme : LightTheme}>
                &lt;CssBaseline />
                &lt;Header
                    appBarRef={this.appBarRef}
                    onBodyChange={this.onBodyChange}
                    onColorsChange={this.onColorsChange}
                    onImportOpen={() => this.onToggleDialog("importDialog")}
                >
                    &lt;ProjectMenu
                        currentProject={currentProject + 1}
                        onProjectClick={this.onCurrentProjectChange}
                        onDialogOpen={this.onToggleDialog}
                        onSaveProject={this.onSaveProject}
                        onSnackbarOpen={this.onSnackbarOpen}
                        projects={["Select your project", ...projects]}
                        serverBase={serverBase}
                    />
                &lt;/Header>
                &lt;Switch>
                {
                    {
                        "Help": &lt;Route
                            path={`/help`}
                            render={() => &lt;Help
                                upperMargin={this.appBarRef.current ? this.appBarRef.current.offsetHeight : undefined}/>
                            }
                        />,
                        "Home": &lt;Route
                            path={`/home`}
                            render={() => &lt;Home
                                goToHelp={() => this.onBodyChange("Help")}
                                goToNewProject={() => this.onBodyChange("Import")}
                                isDarkTheme={this.state.darkTheme}/>
                            }
                        />,
                        "Import": &lt;Route
                            path={`/newProject`}
                            render={() => &lt;Import onFilesAccepted={this.onFilesAccepted}/>}
                        />,
                        "Project": &lt;Route
                            path={`/${this.existsPath}`}
                            render={(routerProps) => &lt;ProjectTabs
                                deleting={deleting}
                                objectGlobalName={objectGlobalName}
                                onSnackbarOpen={this.onSnackbarOpen}
                                project={projects[currentProject]}
                                serverBase={serverBase}
                                updateProject={this.updateProject}
                                {...routerProps}/>
                            }
                        />
                    }[this.state.body]
                }
                &lt;/Switch>
                {currentProject >= 0 &amp;&amp;
                    &lt;React.Fragment>
                        &lt;RenameProjectDialog
                            currentName={projects[currentProject].name}
                            open={renameDialog}
                            onClose={this.onRenameDialogClose}
                        />
                        &lt;SettingsProjectDialog
                            onClose={() => this.onToggleDialog("settingsDialog")}
                            onObjectNamesChange={this.onObjectNamesChange}
                            onSnackbarOpen={this.onSnackbarOpen}
                            open={settingsDialog}
                            projectId={projects[currentProject].id}
                            serverBase={serverBase}
                        />
                        &lt;DeleteProjectDialog
                            currentName={projects[currentProject].name}
                            open={deleteDialog}
                            onClose={this.onDeleteDialogClose}
                        />
                    &lt;/React.Fragment>
                }
                &lt;ImportProjectDialog onImportProject={this.onUploadProject} open={importDialog} />
                &lt;StyledAlert {...alertProps} onClose={this.onSnackbarClose} />
                {this.state.loading &amp;&amp;
                    &lt;LoadingDelay>
                        &lt;LoadingSnackbar
                            message={this.state.loadingTitle}
                            open={this.state.loading}
                        />
                    &lt;/LoadingDelay>
                }
            &lt;/MuiThemeProvider>
        );
    }
}

export default App;
</code></pre>
        </article>
    </section>




            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by 
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

</body>
</html>
